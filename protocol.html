

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Launch Protocol &mdash; Fleshlight Launch Hardware and Protocol Documentation 1.0.0 documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="genindex.html"/>
        <link rel="search" title="Search" href="search.html"/>
    <link rel="top" title="Fleshlight Launch Hardware and Protocol Documentation 1.0.0 documentation" href="index.html"/>
        <link rel="next" title="Electronics Details" href="hardware.html"/>
        <link rel="prev" title="Bluetooth Details" href="bluetooth.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> Fleshlight Launch Hardware and Protocol Documentation
          

          
          </a>

          
            
            
              <div class="version">
                1.0.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="bluetooth.html">Bluetooth Details</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Launch Protocol</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#commands">Commands</a></li>
<li class="toctree-l2"><a class="reference internal" href="#buttons">Buttons</a></li>
<li class="toctree-l2"><a class="reference internal" href="#warning-against-using-buttons-in-interfaces">Warning Against Using Buttons In Interfaces</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="hardware.html">Electronics Details</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Fleshlight Launch Hardware and Protocol Documentation</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Launch Protocol</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/protocol.md.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="launch-protocol">
<span id="launch-protocol"></span><h1>Launch Protocol<a class="headerlink" href="#launch-protocol" title="Permalink to this headline">¶</a></h1>
<div class="section" id="commands">
<span id="commands"></span><h2>Commands<a class="headerlink" href="#commands" title="Permalink to this headline">¶</a></h2>
<p>The command protocol for the launch consists of two byte packets.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="mi">0</span><span class="n">xYY</span> <span class="mi">0</span><span class="n">xZZ</span>
</pre></div>
</div>
<ul class="simple">
<li>YY represents the desired position of the toy. Valid inputs are 0-99
in <a class="reference external" href="https://en.wikipedia.org/wiki/Binary-coded_decimal">BCD format</a>.</li>
<li>ZZ represents the desired speed the toy should move to the position
listed at. Valid inputs are 0-99
in <a class="reference external" href="https://en.wikipedia.org/wiki/Binary-coded_decimal">BCD format</a>.</li>
</ul>
<p>Invalid inputs are ignored.</p>
<p>Since firmware 1.2 it is required to send a 0x00 byte to the commands characteristic before sending these commands.</p>
</div>
<div class="section" id="buttons">
<span id="buttons"></span><h2>Buttons<a class="headerlink" href="#buttons" title="Permalink to this headline">¶</a></h2>
<p>Status of buttons is read via notifications sent by the Status
Notification characteristic. They arrive as an array of 14 ints,
looking like:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="p">[</span><span class="mh">0x03</span><span class="p">,</span> <span class="mh">0xCC</span><span class="p">,</span> <span class="mh">0x03</span><span class="p">,</span> <span class="mh">0x5A</span><span class="p">,</span> <span class="mh">0x03</span><span class="p">,</span> <span class="mh">0xA3</span><span class="p">,</span> <span class="mh">0x03</span><span class="p">,</span> <span class="mh">0xF4</span><span class="p">,</span> <span class="mh">0x03</span><span class="p">,</span> <span class="mh">0xAF</span><span class="p">,</span> <span class="mh">0x03</span><span class="p">,</span> <span class="mh">0x67</span><span class="p">,</span> <span class="mh">0x03</span><span class="p">,</span> <span class="mh">0xCF</span><span class="p">]</span>
</pre></div>
</div>
<p>This array represents a set of 7 16-bit big-endian numbers, reflecting
the state of the buttons on the device. The index of the values
mirrors the order of the buttons on the device, with (assuming the
device is facing you and upright):</p>
<ul class="simple">
<li>the first 3 values representing the buttons on the left side of the
device, from left to right</li>
<li>the 4th value representing the blue LED square button in the middle</li>
<li>the last 3 values representing the buttons on the right side of the
device, from left to right</li>
</ul>
<p>The array shown above is the idle state, with no buttons currently
being pressed. Detecting button presses requires testing for a certain
threshold of the button value. Whenever a button is pressed, the value
will value decrease (up to ~80-90 from its idle state), and whenever
it is let go, the value will increase back to normal.</p>
<p>For example: Button 0, when idle, would register 0x03cc. When pressed, it might go
as low as 0x0360.</p>
</div>
<div class="section" id="warning-against-using-buttons-in-interfaces">
<span id="warning-against-using-buttons-in-interfaces"></span><h2>Warning Against Using Buttons In Interfaces<a class="headerlink" href="#warning-against-using-buttons-in-interfaces" title="Permalink to this headline">¶</a></h2>
<p>Due to the hardware used for the buttons, they do not have a noticable
&#8220;range&#8221; where pressing them works or doesn&#8217;t. While this choice was
most likely made to lessen mechanical wear and simplify the mold and
construction of the device, it also makes it extremely difficult for
users to figure out where to press and have their action register.</p>
<p>On top of this, the 4th button (the blue LED button) is reserved.
Pressing this button puts the device into &#8220;manual&#8221; mode, meaning that
bluetooth will stay connected, but commands sent to the device will
not do anything. As far as we can tell, this is built into the
firmware and cannot be turned off by external code (this may be wrong,
in which case we will update this document when we find out).</p>
<p>We recommend avoiding using device buttons in interfaces if possible.
If the buttons must be used, we recommend taking great care to refine
and tests debounce algorithms, and provide ways for users to
familiarize themselves with your interface before they are required to
use them. While debounce is normally done in an amount of time that
would not be perceivable by the user, the ~10hz update rate of the
launch combined with the slow reaction of the sensors could cause
confusion.</p>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="hardware.html" class="btn btn-neutral float-right" title="Electronics Details" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="bluetooth.html" class="btn btn-neutral" title="Bluetooth Details" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, Kyle Machulis.
      Last updated on True.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'1.0.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>